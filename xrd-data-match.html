<link rel='stylesheet' id='google-fonts-css' href='//fonts.googleapis.com/css?family=Ubuntu%3A400%2C700&#038;ver=5.7.2#038;display=swap&#038;ver=5.7.1' type='text/css' media='all'/>
<div class='main' style='margin:0 auto;display:flex;background:linear-gradient(90deg,#1fc59f,#9DDA3E);font-family:ubuntu;color:#444'>

<div class='leftbar' style='flex:0 0 80%;padding:150px 20px 20px 20px'>
 <div style='display:flex'>
  <div class='subleft' style='flex:0 0 30%'>
  <span contenteditable="true">Your Sample<br>Graph</span>
  </div>
  <div class='subrigth' style='flex:0 0 70%'>
   <div id='chartdiv' style='margin-bottom:3%'></div>
  </div>
 </div>

 <div style='display:flex'>
  <div class='subleft' style='flex:0 0 30%'>
  <span style='font-size:1.2vw;color:red'><b>1st Match:</b><span contenteditable="true"> Copper Oxide</span></span><br>
  <span contenteditable="true" style='font-size:0.8vw;color:red'>(00-01-1234)</span><br>
  <span style='font-size:1vw'>
  <b>Other Names:</b><span contenteditable="true"> Copper Salt</span><br>
  <b>Chemical Formula:</b><span contenteditable="true"> CuNO3</span><br>
  <b>Empirical Formula:</b><span contenteditable="true"> CuNO3</span><br>
  <b>Crystal Structure:</b><span contenteditable="true"> Cubic</span><br>
  <b>a=</b><span contenteditable="true"> 0.24</span>, <b>b=</b><span contenteditable="true"> 0.24</span>, <b>c=</b><span contenteditable="true"> 0.24</span><br> 
  <b>Alpha=</b><span contenteditable="true"> 90</span>, <b>Beta=</b><span contenteditable="true"> 90</span>, <b>Gamma=</b><span contenteditable="true"> 90</span></span>
  </div>
  <div class='subrigth' style='flex:0 0 70%'>
   <div class='match1i'/>
   </div>
  </div>
 </div>
 
 <div style='display:flex'>
  <div class='subleft' style='flex:0 0 30%'>
  <span style='font-size:1.2vw;color:red'><b>2nd Match:</b><span contenteditable="true"> Copper Oxide</span></span><br>
  <span contenteditable="true" style='font-size:0.8vw;color:red'>(00-01-1234)</span><br>
  <span class='details2' style='font-size:1vw;filter:blur(2px)'>
  <b>Other Names:</b><span contenteditable="true"> Copper Salt</span><br>
  <b>Chemical Formula:</b><span contenteditable="true"> CuNO3</span><br>
  <b>Empirical Formula:</b><span contenteditable="true"> CuNO3</span><br>
  <b>Crystal Structure:</b><span contenteditable="true"> Cubic</span><br>
  <b>a=</b><span contenteditable="true"> 0.24</span>, <b>b=</b><span contenteditable="true"> 0.24</span>, <b>c=</b><span contenteditable="true"> 0.24</span><br> 
  <b>Alpha=</b><span contenteditable="true"> 90</span>, <b>Beta=</b><span contenteditable="true"> 90</span>, <b>Gamma=</b><span contenteditable="true"> 90</span></span>
  </div>
  <div class='subrigth' style='flex:0 0 70%'>
   <div class='match2i'/>
   </div>
  </div>
 </div>
 
 <div style='display:flex'>
  <div class='subleft' style='flex:0 0 30%'>
  <span style='font-size:1.2vw;color:red'><b>3rd Match:</b><span contenteditable="true"> Copper Oxide</span></span><br>
  <span contenteditable="true" style='font-size:0.8vw;color:red'>(00-01-1234)</span><br>
  <span class='details3' style='font-size:1vw;filter:blur(2px)'>
  <b>Other Names:</b><span contenteditable="true"> Copper Salt</span><br>
  <b>Chemical Formula:</b><span contenteditable="true"> CuNO3</span><br>
  <b>Empirical Formula:</b><span contenteditable="true"> CuNO3</span><br>
  <b>Crystal Structure:</b><span contenteditable="true"> Cubic</span><br>
  <b>a=</b><span contenteditable="true"> 0.24</span>, <b>b=</b><span contenteditable="true"> 0.24</span>, <b>c=</b><span contenteditable="true"> 0.24</span><br> 
  <b>Alpha=</b><span contenteditable="true"> 90</span>, <b>Beta=</b><span contenteditable="true"> 90</span>, <b>Gamma=</b><span contenteditable="true"> 90</span></span>
  </div>
  <div class='subrigth' style='flex:0 0 70%'>
   <div class='match3i'/>
   </div>
  </div>
 </div>

</div>

<div class='rightbar' style='flex:0 0 20%'>
<textarea id='dinput'>
0	1654
10	1254
18	1254
20	5654
22	1154
30	1243
40	1143
48	1234
50	1934
52	1234
60	1345
68	1345
70	4646
72	1345
80	1478
90	1433
</textarea>
<div style='padding:10px 0;'>
<textarea class='position1'></textarea>
<textarea class='height1'></textarea>
<textarea class='label1'></textarea></div>
<div style='padding:10px 0;'>
<textarea class='position2'></textarea>
<textarea class='height2'></textarea>
<textarea class='label2'></textarea></div>
<div style='padding:10px 0;'>
<textarea class='position3'></textarea>
<textarea class='height3'></textarea>
<textarea class='label3'></textarea></div>
<input type="checkbox" id="2nd" checked='true'>
  <label for="2nd"> 2nd Blur</label><br>
<input type="checkbox" id="3rd" checked='true'>
  <label for="3rd"> 3rd Blur</label>
</div>

</div>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
document.getElementById('dinput').addEventListener('paste', function (e) {
document.getElementById('dinput').addEventListener('input', function () {
d3.selectAll('.graph').remove();
drawChart(getData());
drawChart2(getData2());
});});
function mainData(){
var data = document.getElementById('dinput').value.trim().split('\n').map(line => {
let tokens = line.trim().split(/\s+/).map(str => Number(str, 10));
return { x: tokens[0], y: tokens[1] }
});return data;};

function getData(){ 
data1 = mainData();
return data1};
function drawChart(data) {
var xExtent = d3.extent(data, function(d) { return d.x; }),
xRange = xExtent[1] - xExtent[0],
yExtent = d3.extent(data, function(d) { return d.y; }).reverse(),
yRange = yExtent[1] - yExtent[0];
var xScale = d3.scaleLinear().range([20, 1250]).domain([0, 100]);
var yScale = d3.scaleLinear().range([0, 415]).domain([yExtent[0] - (yRange * .1), yExtent[1] + (yRange * .05)]);

var line = d3.line()
.x(function(d, x) { return xScale(d.x); })
.y(function(d, y) { return yScale(d.y); })
.curve(d3.curveMonotoneX);

d3.select('#chartdiv')
.append('svg')
.attr('class','graph')
.attr("viewBox", "0 0 1280 450");

var svg = d3.select(".graph")
.append("g")
.attr("class", "dchart")
.attr("transform", "translate(0, 0)");

svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0, 415)")
.call(d3.axisBottom(xScale).ticks(20))
.attr('font-size','25px');
 
d3.select('.dchart')
.append('text')
.text('2Î¸')
.attr('x', 1210)
.attr('y', 660)
.style('font-size','40px');

svg.append("g")
.attr("class", "y axis")
.call(d3.axisLeft(yScale).ticks(1))
.attr("transform", "translate(20, 0)")
.attr('font-size','0px');

svg.append("path")
.datum(data)
.attr("class", "line")
.attr("d", line);

var i=1;
var m=1;
svg.selectAll(".dot")
.data(data)
.enter()
.append("circle")
.attr("class", "dot")
.attr("cx", function(d) { return xScale(d.x) })
.attr("cy", function(d) { return yScale(d.y) })
.attr("r", 3)
.on("mouseover", function(d) { 
svg.append("text")
.attr('class','annot')
.attr('x', xScale(d.x) - 20)
.attr('y', yScale(d.y) - 10)
.text(d.x)
.style('font-size','30px')
svg.append('line')
.attr('class','annot')
.style("stroke", "black")
.attr('stroke-width','3')
.attr("x1", xScale(d.x))
.attr("y1", yScale(d.y))
.attr("x2", xScale(d.x))
.attr("y2", 750);
})
.on("mouseout", function() {  
d3.selectAll('.annot').remove()
})    
}drawChart(getData());
</script>

<style>
body{margin:0}
.line {fill:none;stroke:darkblue;stroke-width:3}
.dot {fill:rgba(0,0,0,0);stroke-width:0}
.match1i,.match2i,.match3i{position:relative;background:#eee;padding-top:18%;margin-bottom:5%;margin:0 16px 5% 10px}
.peak1,.peak2,.peak3{background:red;height:100%;width:0.5%;position:absolute;bottom:0}
.match2i,.match3i{background:rgba(255,0,0,0.2);filter:blur(5px)}
textarea{width:82%;height:70px}
.pklbl{position:absolute;top:-12px;font-size:0.7vw;color:red;line-height:10px;text-align:center;left:-8px}
.poslbl{position:absolute;bottom:-10px;font-size:0.7vw;color:black;text-align:center;left:-9px}
</style> 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $('.position1, .height1, .label1').on("input", function() {
    var pos1 = $('.position1').val().split(',');
    var hght1 = $('.height1').val().split(',');
    var lbl1 = $('.label1').val().split(',');
    $('.peak1').remove();
    let html = pos1.map((p, i) => `<div class='peak1' style='left:${pos1[i]}%;height:${hght1[i]}%'><span class='poslbl'>${pos1[i]}</span><span class='pklbl'>${lbl1[i]?lbl1[i]:''}</span></div>`);
    $('.match1i').html(html)
  });
  
    $('.position2, .height2, .label2').on("input", function() {
    var pos2 = $('.position2').val().split(',');
    var hght2 = $('.height2').val().split(',');
    var lbl2 = $('.label2').val().split(',');
    $('.peak2').remove();
    let html = pos2.map((p, i) => `<div class='peak2' style='left:${pos2[i]}%;height:${hght2[i]}%'><span class='poslbl'>${pos2[i]}</span><span class='pklbl'>${lbl2[i]?lbl2[i]:''}</span></div>`);
    $('.match2i').html(html)
  });
  
    $('.position3, .height3, .label3').on("input", function() {
    var pos3 = $('.position3').val().split(',');
    var hght3 = $('.height3').val().split(',');
    var lbl3 = $('.label3').val().split(',');
    $('.peak3').remove();
    let html = pos3.map((p, i) => `<div class='peak3' style='left:${pos3[i]}%;height:${hght3[i]}%'><span class='poslbl'>${pos3[i]}</span><span class='pklbl'>${lbl3[i]?lbl3[i]:''}</span></div>`);
    $('.match3i').html(html)
  });
  
  $('#2nd').change(function() {
  if ($(this).is(':checked')) {
    $('.details2').css('filter','blur(2px)');
    $('.match2i').css('background','rgba(255,0,0,0.2)').css('filter','blur(5px)');
  } else {
    $('.details2').css('filter','blur(0px)')
    $('.match2i').css('background','#eee').css('filter','blur(0px)');
  }
  });
  
  $('#3rd').change(function() {
  if ($(this).is(':checked')) {
    $('.details3').css('filter','blur(2px)');
    $('.match3i').css('background','rgba(255,0,0,0.2)').css('filter','blur(5px)');
  } else {
    $('.details3').css('filter','blur(0px)')
    $('.match3i').css('background','#eee').css('filter','blur(0px)');
  }
  });
  
});
</script>
